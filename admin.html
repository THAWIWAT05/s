<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>üìò ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô</title>
  <style>
    body {
      font-family: "Segoe UI", Tahoma, sans-serif;
      margin: 0;
      background: #f4f6f9;
      color: #333;
    }
    header {
      background: linear-gradient(135deg, #ff512f, #dd2476);
      padding: 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      color: #fff;
      font-size: 20px;
      font-weight: bold;
      box-shadow: 0 4px 10px rgba(0,0,0,0.2);
    }
    .logout-btn {
      background: #fff;
      color: #dd2476;
      padding: 6px 12px;
      border-radius: 6px;
      text-decoration: none;
      font-size: 14px;
      font-weight: bold;
    }
    .logout-btn:hover {
      background: #f0f0f0;
    }
    .container {
      max-width: 1000px;
      margin: auto;
      padding: 20px;
    }
    .section {
      background: #fff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      margin-bottom: 25px;
    }
    h2 {
      margin-top: 0;
      color: #c0392b;
    }
    input, select {
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin: 5px 0;
      width: 100%;
    }
    button {
      background: #27ae60;
      color: #fff;
      padding: 8px 15px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      margin-top: 8px;
    }
    button:hover {
      background: #219150;
    }
    .comment-box {
      background: #f9f9f9;
      border-radius: 8px;
      padding: 10px;
      margin-bottom: 8px;
    }
    .reply {
      margin-left: 15px;
      background: #eef2f9;
      border-left: 3px solid #3498db;
      padding: 5px 10px;
      border-radius: 6px;
    }
    .admin-reply {
      font-weight: bold;
      color: #d35400;
    }
  </style>
</head>
<body>
  <header>
    üìò ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô
    <a href="index.html" class="logout-btn">‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö</a>
  </header>

  <div class="container">
    <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤ -->
    <div class="section">
      <h2>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏´‡∏°‡πà</h2>
      <input type="text" id="newSubject" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ä‡∏µ‡∏ß‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤">
      <button onclick="addSubject()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤</button>
    </div>

    <!-- ‡∏™‡πà‡∏ß‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå -->
    <div class="section">
      <h2>üìÇ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ô‡∏ß‡∏¥‡∏ä‡∏≤</h2>
      <select id="subjectSelect"></select>
      <input type="text" id="fileName" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå (‡πÄ‡∏ä‡πà‡∏ô ‡∏ö‡∏ó‡∏ó‡∏µ‡πà1.pdf)">
      <input type="text" id="fileUrl" placeholder="‡∏•‡∏¥‡∏á‡∏Å‡πå‡πÑ‡∏ü‡∏•‡πå (‡πÄ‡∏ä‡πà‡∏ô files/bio1.pdf)">
      <button onclick="addFile()">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå</button>
    </div>

    <!-- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå -->
    <div class="section">
      <h2>üí¨ ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</h2>
      <div id="commentManager"></div>
    </div>
  </div>

  <script>
    // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å LocalStorage
    let fileData = JSON.parse(localStorage.getItem("fileData")) || {
      math: [
        { name: "‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô.pdf", url: "files/math-basic.pdf" },
        { name: "‡πÇ‡∏à‡∏ó‡∏¢‡πå‡∏Ñ‡∏ì‡∏¥‡∏ï ‡∏°.6.docx", url: "files/math-exercise.docx" }
      ],
      physics: [
        { name: "‡∏Å‡∏•‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå.pdf", url: "files/mechanics.pdf" },
        { name: "‡πÑ‡∏ü‡∏ü‡πâ‡∏≤‡πÅ‡∏•‡∏∞‡πÅ‡∏°‡πà‡πÄ‡∏´‡∏•‡πá‡∏Å.zip", url: "files/electricity.zip" }
      ],
      chemistry: [
        { name: "‡πÄ‡∏Ñ‡∏°‡∏µ‡∏≠‡∏¥‡∏ô‡∏ó‡∏£‡∏µ‡∏¢‡πå.pdf", url: "files/organic.pdf" },
        { name: "‡∏™‡∏£‡∏∏‡∏õ‡πÄ‡∏Ñ‡∏°‡∏µ.docx", url: "files/chem-summary.docx" }
      ]
    };
    let commentsData = JSON.parse(localStorage.getItem("comments")) || {};

    function saveData() {
      localStorage.setItem("fileData", JSON.stringify(fileData));
      localStorage.setItem("comments", JSON.stringify(commentsData));
    }

    // ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏ô dropdown
    function loadSubjects() {
      const select = document.getElementById("subjectSelect");
      select.innerHTML = "";
      Object.keys(fileData).forEach(sub => {
        const opt = document.createElement("option");
        opt.value = sub;
        opt.textContent = sub;
        select.appendChild(opt);
      });
    }

    function addSubject() {
      const subject = document.getElementById("newSubject").value.trim();
      if (subject && !fileData[subject]) {
        fileData[subject] = [];
        saveData();
        loadSubjects();
        alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ß‡∏¥‡∏ä‡∏≤‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
        document.getElementById("newSubject").value = "";
      } else {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ä‡∏≤‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥‡∏Å‡∏±‡∏ô");
      }
    }

    function addFile() {
      const subject = document.getElementById("subjectSelect").value;
      const fileName = document.getElementById("fileName").value.trim();
      const fileUrl = document.getElementById("fileUrl").value.trim();
      if (subject && fileName && fileUrl) {
        fileData[subject].push({ name: fileName, url: fileUrl });
        saveData();
        alert("‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß");
        document.getElementById("fileName").value = "";
        document.getElementById("fileUrl").value = "";
      } else {
        alert("‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö");
      }
    }

    // ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≠‡∏°‡πÄ‡∏°‡∏ô‡∏ï‡πå
    function loadCommentsManager() {
      const manager = document.getElementById("commentManager");
      manager.innerHTML = "";
      Object.keys(commentsData).forEach(key => {
        const section = document.createElement("div");
        section.innerHTML = `<h4>üìÇ ${key}</h4>`;
        (commentsData[key] || []).forEach((text, i) => {
          const box = document.createElement("div");
          box.className = "comment-box";
          box.innerHTML = `
            <p>${text}</p>
            <button onclick="deleteComment('${key}', ${i})">‚ùå ‡∏•‡∏ö</button>
            <button onclick="replyComment('${key}', ${i})">‚Ü©Ô∏è ‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö</button>
          `;
          // ‡πÅ‡∏™‡∏î‡∏á reply ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
          if (text.reply) {
            const reply = document.createElement("div");
            reply.className = "reply";
            reply.innerHTML = `<span class="admin-reply">‡πÅ‡∏≠‡∏î‡∏°‡∏¥‡∏ô:</span> ${text.reply}`;
            box.appendChild(reply);
          }
          section.appendChild(box);
        });
        manager.appendChild(section);
      });
    }

    function deleteComment(key, index) {
      commentsData[key].splice(index, 1);
      saveData();
      loadCommentsManager();
    }

    function replyComment(key, index) {
      const reply = prompt("‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏≠‡∏ö‡∏Å‡∏•‡∏±‡∏ö:");
      if (reply) {
        if (typeof commentsData[key][index] === "string") {
          commentsData[key][index] = { text: commentsData[key][index], reply };
        } else {
          commentsData[key][index].reply = reply;
        }
        saveData();
        loadCommentsManager();
      }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
    loadSubjects();
    loadCommentsManager();
  </script>
</body>
</html>
